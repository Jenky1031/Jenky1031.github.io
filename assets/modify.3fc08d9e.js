import{q as ye,u as _e,k as ne,A as x,Z as we,r as oe,o as Ue,m as Be,s as n,n as C,t as U,D as S,a3 as H,M as xe,y as Re,z as ke,T as W}from"./vendor.3b9415e3.js";import{_ as Te,u as Ae,d as Ie,c as De}from"./index.231fe138.js";/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function se(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,a)}return t}function L(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?se(Object(t),!0).forEach(function(a){Ee(r,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))})}return r}function Oe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function le(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function Ce(r,e,t){return e&&le(r.prototype,e),t&&le(r,t),r}function Ee(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function P(){return P=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},P.apply(this,arguments)}var ue={exports:{}};(function(r){typeof window!="undefined"&&function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,a=e.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),s=a&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,h=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,d=(a||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(u){var c,v,m,p,_,i,l,f,w;if(c=u.match(h),!c)throw new Error("invalid data URI");for(v=c[2]?c[1]:"text/plain"+(c[3]||";charset=US-ASCII"),m=!!c[4],p=u.slice(c[0].length),m?_=atob(p):_=decodeURIComponent(p),i=new ArrayBuffer(_.length),l=new Uint8Array(i),f=0;f<_.length;f+=1)l[f]=_.charCodeAt(f);return a?new Blob([s?l:i],{type:v}):(w=new o,w.append(i),w.getBlob(v))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(u,c,v){var m=this;setTimeout(function(){v&&t.toDataURL&&d?u(d(m.toDataURL(c,v))):u(m.mozGetAsFile("blob",c))})}:t.toDataURL&&d&&(t.msToBlob?t.toBlob=function(u,c,v){var m=this;setTimeout(function(){(c&&c!=="image/png"||v)&&t.toDataURL&&d?u(d(m.toDataURL(c,v))):u(m.msToBlob(c))})}:t.toBlob=function(u,c,v){var m=this;setTimeout(function(){u(d(m.toDataURL(c,v)))})})),r.exports?r.exports=d:e.dataURLtoBlob=d}(window)})(ue);var Le=ue.exports,Pe=function(e){return typeof Blob=="undefined"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},ce={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},je=typeof window!="undefined"&&typeof window.document!="undefined",B=je?window:{},j=function(e){return e>0&&e<1/0},Me=Array.prototype.slice;function $e(r){return Array.from?Array.from(r):Me.call(r)}var Ve=/^image\/.+$/;function F(r){return Ve.test(r)}function Se(r){var e=F(r)?r.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var de=String.fromCharCode;function He(r,e,t){var a="",s;for(t+=e,s=e;s<t;s+=1)a+=de(r.getUint8(s));return a}var We=B.btoa;function Fe(r,e){for(var t=[],a=8192,s=new Uint8Array(r);s.length>0;)t.push(de.apply(null,$e(s.subarray(0,a)))),s=s.subarray(a);return"data:".concat(e,";base64,").concat(We(t.join("")))}function ze(r){var e=new DataView(r),t;try{var a,s,o;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,d=2;d+1<h;){if(e.getUint8(d)===255&&e.getUint8(d+1)===225){s=d;break}d+=1}if(s){var u=s+4,c=s+10;if(He(e,u,4)==="Exif"){var v=e.getUint16(c);if(a=v===18761,(a||v===19789)&&e.getUint16(c+2,a)===42){var m=e.getUint32(c+4,a);m>=8&&(o=c+m)}}}if(o){var p=e.getUint16(o,a),_,i;for(i=0;i<p;i+=1)if(_=o+i*12+2,e.getUint16(_,a)===274){_+=8,t=e.getUint16(_,a),e.setUint16(_,1,a);break}}}catch{t=1}return t}function Ne(r){var e=0,t=1,a=1;switch(r){case 2:t=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:a}}var Xe=/\.\d*(?:0|9){12}\d*$/;function he(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Xe.test(r)?Math.round(r*e)/e:r}function E(r){var e=r.aspectRatio,t=r.height,a=r.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",o=j(a),h=j(t);if(o&&h){var d=t*e;(s==="contain"||s==="none")&&d>a||s==="cover"&&d<a?t=a/e:a=t*e}else o?t=a/e:h&&(a=t*e);return{width:a,height:t}}var Ge=B.ArrayBuffer,ve=B.FileReader,R=B.URL||B.webkitURL,Ye=/\.\w+$/,qe=B.Compressor,Ke=function(){function r(e,t){Oe(this,r),this.file=e,this.image=new Image,this.options=L(L({},ce),t),this.aborted=!1,this.result=null,this.init()}return Ce(r,[{key:"init",value:function(){var t=this,a=this.file,s=this.options;if(!Pe(a)){this.fail(new Error("The first argument must be a File or Blob object."));return}var o=a.type;if(!F(o)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!R||!ve){this.fail(new Error("The current browser does not support image compression."));return}if(Ge||(s.checkOrientation=!1),R&&!s.checkOrientation)this.load({url:R.createObjectURL(a)});else{var h=new ve,d=s.checkOrientation&&o==="image/jpeg";this.reader=h,h.onload=function(u){var c=u.target,v=c.result,m={};if(d){var p=ze(v);p>1||!R?(m.url=Fe(v,o),p>1&&P(m,Ne(p))):m.url=R.createObjectURL(a)}else m.url=v;t.load(m)},h.onabort=function(){t.fail(new Error("Aborted to read the image with FileReader."))},h.onerror=function(){t.fail(new Error("Failed to read the image with FileReader."))},h.onloadend=function(){t.reader=null},d?h.readAsArrayBuffer(a):h.readAsDataURL(a)}}},{key:"load",value:function(t){var a=this,s=this.file,o=this.image;o.onload=function(){a.draw(L(L({},t),{},{naturalWidth:o.naturalWidth,naturalHeight:o.naturalHeight}))},o.onabort=function(){a.fail(new Error("Aborted to load the image."))},o.onerror=function(){a.fail(new Error("Failed to load the image."))},B.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(B.navigator.userAgent)&&(o.crossOrigin="anonymous"),o.alt=s.name,o.src=t.url}},{key:"draw",value:function(t){var a=this,s=t.naturalWidth,o=t.naturalHeight,h=t.rotate,d=h===void 0?0:h,u=t.scaleX,c=u===void 0?1:u,v=t.scaleY,m=v===void 0?1:v,p=this.file,_=this.image,i=this.options,l=document.createElement("canvas"),f=l.getContext("2d"),w=Math.abs(d)%180==90,g=(i.resize==="contain"||i.resize==="cover")&&j(i.width)&&j(i.height),A=Math.max(i.maxWidth,0)||1/0,I=Math.max(i.maxHeight,0)||1/0,D=Math.max(i.minWidth,0)||0,O=Math.max(i.minHeight,0)||0,k=s/o,b=i.width,y=i.height;if(w){var z=[I,A];A=z[0],I=z[1];var N=[O,D];D=N[0],O=N[1];var X=[y,b];b=X[0],y=X[1]}g&&(k=b/y);var G=E({aspectRatio:k,width:A,height:I},"contain");A=G.width,I=G.height;var Y=E({aspectRatio:k,width:D,height:O},"cover");if(D=Y.width,O=Y.height,g){var q=E({aspectRatio:k,width:b,height:y},i.resize);b=q.width,y=q.height}else{var K=E({aspectRatio:k,width:b,height:y}),Z=K.width;b=Z===void 0?s:Z;var J=K.height;y=J===void 0?o:J}b=Math.floor(he(Math.min(Math.max(b,D),A))),y=Math.floor(he(Math.min(Math.max(y,O),I)));var me=-b/2,fe=-y/2,pe=b,ge=y,M=[];if(g){var Q=0,ee=0,$=s,V=o,te=E({aspectRatio:k,width:s,height:o},{contain:"cover",cover:"contain"}[i.resize]);$=te.width,V=te.height,Q=(s-$)/2,ee=(o-V)/2,M.push(Q,ee,$,V)}if(M.push(me,fe,pe,ge),w){var ae=[y,b];b=ae[0],y=ae[1]}l.width=b,l.height=y,F(i.mimeType)||(i.mimeType=p.type);var ie="transparent";if(p.size>i.convertSize&&i.convertTypes.indexOf(i.mimeType)>=0&&(i.mimeType="image/jpeg"),i.mimeType==="image/jpeg"&&(ie="#fff"),f.fillStyle=ie,f.fillRect(0,0,b,y),i.beforeDraw&&i.beforeDraw.call(this,f,l),!this.aborted&&(f.save(),f.translate(b/2,y/2),f.rotate(d*Math.PI/180),f.scale(c,m),f.drawImage.apply(f,[_].concat(M)),f.restore(),i.drew&&i.drew.call(this,f,l),!this.aborted)){var re=function(be){a.aborted||a.done({naturalWidth:s,naturalHeight:o,result:be})};l.toBlob?l.toBlob(re,i.mimeType,i.quality):re(Le(l.toDataURL(i.mimeType,i.quality)))}}},{key:"done",value:function(t){var a=t.naturalWidth,s=t.naturalHeight,o=t.result,h=this.file,d=this.image,u=this.options;if(R&&!u.checkOrientation&&R.revokeObjectURL(d.src),o)if(u.strict&&o.size>h.size&&u.mimeType===h.type&&!(u.width>a||u.height>s||u.minWidth>a||u.minHeight>s||u.maxWidth<a||u.maxHeight<s))o=h;else{var c=new Date;o.lastModified=c.getTime(),o.lastModifiedDate=c,o.name=h.name,o.name&&o.type!==h.type&&(o.name=o.name.replace(Ye,Se(o.type)))}else o=h;this.result=o,u.success&&u.success.call(this,o)}},{key:"fail",value:function(t){var a=this.options;if(a.error)a.error.call(this,t);else throw t}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=qe,r}},{key:"setDefaults",value:function(t){P(ce,t)}}]),r}();const T=r=>(Re("data-v-38def5be"),r=r(),ke(),r),Ze={class:"user_page"},Je={class:"t_nav"},Qe={class:"t_nav_title"},et=T(()=>n("div",{class:"t_nav_br"},null,-1)),tt={class:"user_gr"},at={class:"jdtx"},it={class:"this"},rt=T(()=>n("dt",null,[n("span",null,"1")],-1)),nt={class:"this"},ot=T(()=>n("dt",null,[n("span",null,"2")],-1)),st=T(()=>n("dt",null,[n("span",null,"3")],-1)),lt=T(()=>n("dt",null,[n("span",null,"4")],-1)),ut=T(()=>n("div",{class:"line"},null,-1)),ct={class:"list-block sqjl_list"},dt={class:"item-content item-link"},ht={class:"item-inner border-bottom-1px"},vt={class:"item-title label"},mt={class:"item-input"},ft={class:"item-content"},pt={class:"item-inner border-bottom-1px"},gt={class:"item-title label"},bt={class:"item-input"},yt=["placeholder"],_t={class:"item-content"},wt={class:"item-inner border-bottom-1px"},Ut={class:"item-title label"},Bt={class:"item-input"},xt=["placeholder"],Rt={class:"item-content"},kt={class:"item-inner border-bottom-1px"},Tt={class:"item-title label"},At={class:"item-input"},It=["placeholder"],Dt={class:"nav_fege"},Ot={class:"item-content item-link"},Ct={class:"item-inner border-bottom-1px"},Et={class:"item-title label"},Lt={class:"item-input"},Pt={name:"",id:"",class:"i-input"},jt={value:""},Mt={class:"item-content"},$t={class:"item-inner border-bottom-1px"},Vt={class:"item-title label"},St={class:"item-input flex imgsBox"},Ht={class:"itbnw"},Wt=["onClick"],Ft={setup(r){const e=ye(),t=_e(),a=ne(()=>e.getters.userInfo),s=ne(()=>e.getters.defaultAvatarUrl),o=x(""),h=x(""),d=x(""),u=x([]),c=x([]),v=x([]),m=x([]);we(a,()=>{var i;o.value=a.value.nickname||"",h.value=a.value.email||"",d.value=a.value.phone||"",u.value.push({url:a.value.avatarUrl||s.value}),(i=a.value.uploadIdImg)==null||i.split(";").forEach((l="",f)=>{switch(l==="undefined"&&(l=""),f){case 0:c.value.push({url:l});break;case 1:v.value.push({url:l});break;case 2:m.value.push({url:l});break}})},{immediate:!0});const p=async i=>{new Ke(i.file,{quality:.3,success:async l=>{let f=new FormData;f.append("file",l),i.status="uploading",i.message="\u4E0A\u4F20\u4E2D...";try{const w=await Ae(f);i.status="done",i.imgUrl=Ie(w)}catch{i.status="failed",i.message="\u4E0A\u4F20\u5931\u8D25",W.fail("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25")}},error(l){console.log(l.message)}})},_=async()=>{try{await De({playerId:a.value.id,nickname:o.value,avatarUrl:u.value[0].imgUrl,phone:d.value,email:h.value,uploadIdImg:`${c.value[0].imgUrl};${v.value[0].imgUrl};${m.value[0].imgUrl}`}),W.success("\u63D0\u4EA4\u4E2A\u4EBA\u4FE1\u606F\u6210\u529F"),e.dispatch("user/getPlayerInfo"),t.push({name:"myProfile"})}catch{W.fail("\u63D0\u4EA4\u4E2A\u4EBA\u4FE1\u606F\u5931\u8D25")}};return(i,l)=>{const f=oe("back"),w=oe("van-uploader");return Ue(),Be("div",Ze,[n("div",Je,[C(f,{color:"black"}),n("div",Qe,U(i.$t("profile.modifyTitle")),1)]),et,n("div",tt,[n("div",at,[n("dl",it,[rt,n("dd",null,U(i.$t("login.register")),1)]),n("dl",nt,[ot,n("dd",null,U(i.$t("profile.perfectInformation")),1)]),n("dl",null,[st,n("dd",null,U(i.$t("profile.verify")),1)]),n("dl",null,[lt,n("dd",null,U(i.$t("profile.complete")),1)])]),ut,n("div",ct,[n("ul",null,[n("li",null,[n("div",dt,[n("div",ht,[n("div",vt,U(i.$t("profile.avatar")),1),n("div",mt,[C(w,{class:"avatar",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=g=>u.value=g),"max-count":1,"after-read":p},null,8,["modelValue"])])])])]),n("li",null,[n("div",ft,[n("div",pt,[n("div",gt,U(i.$t("profile.nickname")),1),n("div",bt,[S(n("input",{type:"text",placeholder:i.$t("msg.enterNickname"),class:"i-input","onUpdate:modelValue":l[1]||(l[1]=g=>o.value=g)},null,8,yt),[[H,o.value]])])])])]),n("li",null,[n("div",_t,[n("div",wt,[n("div",Ut,U(i.$t("profile.email")),1),n("div",Bt,[S(n("input",{type:"text",class:"i-input",placeholder:i.$t("msg.enterEmail"),"onUpdate:modelValue":l[2]||(l[2]=g=>h.value=g)},null,8,xt),[[H,h.value]])])])])]),n("li",null,[n("div",Rt,[n("div",kt,[n("div",Tt,U(i.$t("profile.phone")),1),n("div",At,[S(n("input",{type:"text",placeholder:i.$t("msg.enterPhone"),class:"i-input","onUpdate:modelValue":l[3]||(l[3]=g=>d.value=g)},null,8,It),[[H,d.value]])])])])])]),n("ul",null,[n("li",Dt,[n("div",Ot,[n("div",Ct,[n("div",Et,U(i.$t("profile.proofType")),1),n("div",Lt,[n("select",Pt,[n("option",jt,U(i.$t("profile.IDCard")),1)])])])])]),n("li",null,[n("div",Mt,[n("div",$t,[n("div",Vt,U(i.$t("profile.userIdentity")),1),n("div",St,[C(w,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=g=>c.value=g),"max-count":1,class:"gr_icon gr_1","after-read":p},null,8,["modelValue"]),C(w,{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=g=>v.value=g),"max-count":1,class:"gr_icon gr_2","after-read":p},null,8,["modelValue"]),C(w,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=g=>m.value=g),"max-count":1,class:"gr_icon gr_3","after-read":p},null,8,["modelValue"])])])])])])])]),n("div",Ht,[n("button",{class:"ibtn btn_cheng",onClick:xe(_,["prevent"])},U(i.$t("other.submitForReview")),9,Wt)])])}}};var Gt=Te(Ft,[["__scopeId","data-v-38def5be"]]);export{Gt as default};
